{% extends 'base.html' %}

{% block head %}
	<title>Interface d'Arbitrage</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/arbitrage.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/chrono.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/history.css') }}">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Anton&family=Orbitron&display=swap">
	<script src="{{ url_for('static', filename='js/arbitrage.js') }}"></script>
{% endblock %}

{% block body_class %}arbitrage{% endblock %}
{% block body %}
<center>
	<h1>Arene #{{ arene._id }} </h1>

	<div class="names-and-timer">
		<h1>{{ arene.combattants['rouge'].nom }}</h1>

		<div class="timer-container">
	        <!-- First Line: Plus, Timer Display, Minus -->
	        <div class="timer-row">
	            <button id="plus-button">+</button>
	            <div class="timer-display">
	                <div class="timer-value" id="timer-value">03:30</div>
	            </div>
	            <button id="minus-button">−</button>
	        </div>

	        <!-- Second Line: Start, Pause, Reset -->
	        <div class="timer-row controls">
	            <button id="start-button">Start</button>
	            <button id="pause-button">Pause</button>
	            <button id="reset-button">Reset</button>
	        </div>
	    </div>
		
		<h1>{{ arene.combattants['vert'].nom}}</h1>
	</div>

	<div>
		<table>
			<tr>
				<td class="score-cell score-rouge"> 
					<p><center><h1 id="score_rouge">{{ arene.score['rouge'] }}</h1></p>
					<button class="increment-score" data-arene="{{ arene._id }}" data-color="rouge" data-value="1"> +1 point </button>
					<button class="increment-score" data-arene="{{ arene._id }}" data-color="rouge" data-value="3"> +3 point </button>
					<button class="increment-score" data-arene="{{ arene._id }}" data-color="rouge" data-value="5"> +5 point </button>
					
					</center> <!-- à enlever -->
				</td> 

				<td class="score-cell score-vert"> 
					<p><center><h1 id="score_vert">{{ arene.score['vert'] }}</h1></p>
					<button class="increment-score" data-arene="{{ arene._id }}" data-color="vert" data-value="1"> +1 point </button>
					<button class="increment-score" data-arene="{{ arene._id }}" data-color="vert" data-value="3"> +3 point </button>
					<button class="increment-score" data-arene="{{ arene._id }}" data-color="vert" data-value="5"> +5 point </button>

					</center> <!-- à enlever -->
				</td>
			</tr>
		
			<tr>
				<td><center>
					<p>Cartons: Blanc: <span id="cbt_rouge_carton_blanc">{{ arene.cartons['vert']['blanc'] }}</span>, Jaune: <span id="cbt_rouge_carton_jaune">{{ arene.cartons['vert']['jaune'] }}</span>, Rouge: <span id="cbt_rouge_carton_rouge">{{ arene.cartons['vert']['rouge'] }}</span> </p>
					<button class="increment-carton" data-arene="{{ arene._id }}" data-color="rouge" data-value="blanc"> Carton Blanc </button>
					<button class="increment-carton" data-arene="{{ arene._id }}" data-color="rouge" data-value="jaune"> Carton Jaune </button>
					<button class="increment-carton" data-arene="{{ arene._id }}" data-color="rouge" data-value="rouge"> Carton Rouge </button>

					</center> <!-- à enlever -->
				</td>

				<td><center>
					<p>Cartons: Blanc: <span id="cbt_vert_carton_blanc">{{ arene.cartons['vert']['blanc'] }}</span>, Jaune: <span id="cbt_vert_carton_jaune">{{ arene.cartons['vert']['jaune'] }}</span>, Rouge: <span id="cbt_vert_carton_rouge">{{ arene.cartons['vert']['rouge'] }}</span> </p>
					<button class="increment-carton" data-arene="{{ arene._id }}" data-color="vert" data-value="blanc"> Carton Blanc </button>
					<button class="increment-carton" data-arene="{{ arene._id }}" data-color="vert" data-value="jaune"> Carton Jaune </button>
					<button class="increment-carton" data-arene="{{ arene._id }}" data-color="vert" data-value="rouge"> Carton Rouge </button>

					</center> <!-- à enlever -->
				</td>
			</tr>
		</table>
		</center> <!-- à enlever -->
	</div>

	<div class="history">
	    <!-- Cancel Last Action Button -->
	    <div class="annuler" data-arene="{{ arene._id }}">
	        <button class="cancel-button">Annuler la dernière action</button>
	    </div>

	    <!-- Historical Actions List -->
	    <div id="actions-list">
	        {% for ligne in arene.historique[::-1] %}
	            <div class="history_line">
	                <span class="history-timestamp">{{ ligne[0] }}</span>
	                <span class="history-category {{ ligne[1] }}">{{ ligne[1] }}</span>: 
	                <span class="history-details">{{ ligne[2] }} {{ ligne[3] }}</span>
	            </div>
	        {% endfor %}
	    </div>
	</div>
{% endblock %}
